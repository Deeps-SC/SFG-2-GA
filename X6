def get_schedules(producer_id, schedules_dict):
    """
    Returns a list of matching schedules for the given producer_id.
    The match is based on the 'ProducerMailbox' value inside the parsed SCHEDULE_PARAMS dict.
    """
    schedules = schedules_dict.get("SI_RESOURCES", {}).get("SCHEDULES", {}).get("SCHEDULE", [])

    if not isinstance(schedules, list):
        schedules = [schedules]  # normalize to list if only one schedule

    matching_schedules = []

    for schedule in schedules:
        params = schedule.get("SCHEDULE PARAMS", {})
        dataxml = params.get("DataXML", {})
        parameters = dataxml.get("Parameter", [])

        # Normalize Parameter to list if it's a single dict
        if isinstance(parameters, dict):
            parameters = [parameters]

        for param in parameters:
            if param.get("Name") == "ProducerMailbox":
                raw_value = param.get("Value", "")
                normalized = raw_value.strip("/").split("/")[0]  # Extract first part after slash
                if normalized == producer_id:
                    matching_schedules.append(schedule)
                    break  # No need to check further params in this schedule

    return matching_schedules
